<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Social Growth â€¢ Login</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:system-ui}

body{
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:
    radial-gradient(circle at 20% 20%,#00f2ff22,transparent 40%),
    radial-gradient(circle at 80% 80%,#00ff8822,transparent 40%),
    linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  color:#fff;
}

.logo{
  text-align:center;
  font-size:32px;
  font-weight:900;
  margin-bottom:30px;
  background:linear-gradient(90deg,#00f2ff,#00ff88,#00f2ff);
  background-size:200% auto;
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  animation:glowMove 4s linear infinite;
}

@keyframes glowMove{
  0%{background-position:0% center}
  100%{background-position:200% center}
}

.card{
  width:90%;
  max-width:400px;
  padding:30px;
  border-radius:25px;
  background:rgba(255,255,255,.08);
  backdrop-filter:blur(20px);
  box-shadow:0 0 40px rgba(0,255,200,.3);
}

input{
  width:100%;
  padding:15px;
  margin:10px 0;
  border:none;
  border-radius:20px;
  background:#003545;
  color:#fff;
  font-size:15px;
}

button{
  width:100%;
  padding:15px;
  margin-top:15px;
  border:none;
  border-radius:30px;
  font-weight:700;
  font-size:16px;
  background:linear-gradient(90deg,#00f2ff,#00ff88);
  cursor:pointer;
  position:relative;
}

button:disabled{
  opacity:.6;
  cursor:not-allowed;
}

.loader{
  width:18px;
  height:18px;
  border:3px solid #fff;
  border-top:3px solid transparent;
  border-radius:50%;
  position:absolute;
  right:15px;
  top:50%;
  transform:translateY(-50%);
  animation:spin 1s linear infinite;
  display:none;
}

@keyframes spin{
  100%{transform:translateY(-50%) rotate(360deg);}
}

.link{
  text-align:center;
  margin-top:15px;
  cursor:pointer;
  color:#00f2ff;
}

.msg{
  text-align:center;
  margin-top:15px;
  font-weight:600;
}

.hidden{display:none}
</style>
</head>

<body>

<div class="card">

<div class="logo">Social Growth</div>

<div id="loginBox">
  <input id="loginUser" placeholder="Username">
  <input id="loginPass" type="password" placeholder="Password">
  <button id="loginBtn" onclick="login()">
    Login
    <div class="loader" id="loginLoader"></div>
  </button>
  <div class="link" onclick="showSignup()">Create New Account</div>
</div>

<div id="signupBox" class="hidden">
  <input id="suUser" placeholder="Username">
  <input id="suGmail" placeholder="Gmail">
  <input id="suPass" type="password" placeholder="Password">
  <button id="signupBtn" onclick="signup()">
    Create Account
    <div class="loader" id="signupLoader"></div>
  </button>
  <div class="link" onclick="showLogin()">Back to Login</div>
</div>

<div class="msg" id="msg"></div>

</div>

<script>
const API_URL="https://script.google.com/macros/s/AKfycby0UHijonDZaPPVyGpjKsAsc9OUTJusetjoQMwygHmiwPd7otW7B1p0D_oIwmuh5rIbIw/exec";

/* SWITCH */
function showSignup(){
  loginBox.classList.add("hidden");
  signupBox.classList.remove("hidden");
  msg.innerText="";
}

function showLogin(){
  signupBox.classList.add("hidden");
  loginBox.classList.remove("hidden");
  msg.innerText="";
}

/* LOGIN */
function login(){
  const u=loginUser.value.trim();
  const p=loginPass.value.trim();

  if(!u || !p){
    msg.innerText="Enter username & password";
    return;
  }

  loginBtn.disabled=true;
  loginLoader.style.display="block";
  msg.innerText="";

  fetch(API_URL,{
    method:"POST",
    body:JSON.stringify({
      action:"login",
      username:u,
      password:p
    })
  })
  .then(r=>r.json())
  .then(data=>{
    if(data.ok){
      localStorage.setItem("userID",data.userID);
      window.location.href="home.html";
    }else{
      msg.innerText=data.msg || "Invalid Username or Password";
    }
  })
  .finally(()=>{
    loginBtn.disabled=false;
    loginLoader.style.display="none";
  });
}

/* SIGNUP */
function signup(){
  const u=suUser.value.trim();
  const g=suGmail.value.trim();
  const p=suPass.value.trim();

  if(!u || !g || !p){
    msg.innerText="Fill all fields";
    return;
  }

  signupBtn.disabled=true;
  signupLoader.style.display="block";
  msg.innerText="Checking...";

  fetch(API_URL,{
    method:"POST",
    body:JSON.stringify({
      action:"signup",
      username:u,
      gmail:g,
      password:p
    })
  })
  .then(r=>r.json())
  .then(data=>{
    if(data.ok){
      msg.innerText="Account Created Successfully";
      showLogin();
    }else{
      msg.innerText=data.msg || "Username or Gmail already exists";
    }
  })
  .finally(()=>{
    signupBtn.disabled=false;
    signupLoader.style.display="none";
  });
}
</script>

</body>
</html>